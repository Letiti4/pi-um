"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{31750:function(t,e,r){r.d(e,{Z:function(){return f}});var a=r(14924),i=r(85893),o=r(36465),s=r.n(o),n=r(67294),l=r(68949),d=r(38026),h=r(67478);let p=new String('@import"https://fonts.googleapis.com/css2?family=Noto+Emoji:wght@500&display=swap";@font-face{font-family:"TextSecuritySquare";src:url("'.concat("https://static.myalbum.io",'/_static/fonts/text-security-square-compat.woff2")format("woff2"),url("').concat("https://static.myalbum.io",'/_static/fonts/text-security-square-compat.ttf")format("truetype")}@font-face{font-family:emoji;src:local("Apple Color Emoji"),local("Android Emoji"),local("Segoe UI"),local(EmojiSymbols),local(Symbola);unicode-range:u+1f300-1f5ff,u+1f600-1f64f,u+1f680-1f6ff,u+2600-26ff}'));p.__hash="ecb7b19c4befad34",Promise.all([r.e(9980),r.e(6270)]).then(r.bind(r,96270)).then(()=>{});let b={target:void 0};class u extends n.PureComponent{getLayerByOffset(t){return function(t,e){if(!e||!t||void 0===t.x||void 0===t.y)return!1;let r=document.elementFromPoint(t.x,t.y);if(r){let t=e.getPointerElLayer(r);return t}}(t,this.blueprint)}highlightLayer(t){var e;(e=this.blueprint)&&(!1===t||void 0===t?e._highlightedLayer&&e._highlightedLayer.highlight(!1):t&&(b.target&&b.target!==t&&b.target.highlight(!1),b.target=t,t.highlight("rgba(0,0,0, 0.5)")),e._highlightedLayer=t)}highlightArea(t,e){this.blueprint&&this.blueprint.highlightArea(t,e)}componentDidMount(){this._mounted=!0,this.dataUpdate({}),this.renderUpdate(),this.props.onMount&&(this.unmountCallback=this.props.onMount(this.ref.current))}componentDidUpdate(t){this.dataUpdate(t),this.renderUpdate()}loadData(t){if(this._url===t)return this._urlPromise;this._cancelPromise&&this._cancelPromise(),this._url=t;let[e,r]=(0,d.FetchJSON)(t,{cache:!0,fetch:{mode:"cors"}});e.then(t=>{let{data:e}=t;this.data=e,this.renderUpdate()}),e.catch(t=>{console.error(t)}),this._urlPromise=e,this._cancelPromise=r}dataUpdate(t){void 0!==this.props.url&&t.url!==this.props.url?(this.url=this.props.url,this.data=void 0,this.loadData(this.url)):this.props.data!==t.data&&(this.url=void 0,this.data=this.props.data)}renderUpdate(){let t=void 0!==this.data&&void 0!==this.props.extensions&&void 0!==this.props.layerData;t&&this.setBlueprintDataAndExtensions(this.data,this.props.extensions).then(()=>{this._test=this.blueprint._uid,this.setRightFrame(),this.setLeftFrame(),this.setLayerData(),this.setViewBox()}).catch(()=>{})}componentWillUnmount(){for(let t of(this._mounted=!1,this.disposers))t();for(let t in this.assetDisposers)this.assetDisposers[t]();this.blueprint&&(this.blueprint.destroy(),this.blueprint=null),this.dragTarget&&this.dragTarget.destroy(),this.unmountCallback&&this.unmountCallback()}setViewBox(){if(!this.blueprint)return;let t=void 0!==this.props.viewBox?{...(0,l.toJS)(this.props.viewBox)}:"full",e=JSON.stringify(t);this.updateCache.setViewBox!==e&&(this.updateCache.setViewBox=e,this.blueprint.setViewBox(t),this.blueprint.render())}setRightFrame(){let t=(0,l.toJS)(this.props.rightFrame);if(void 0===t||!this.right)return;let e=JSON.stringify(t);this.updateCache.setRightFrame!==e&&(this.right.setData({frame:t},!0),this.updateCache.setRightFrame=e)}setLeftFrame(){let t=(0,l.toJS)(this.props.leftFrame);if(void 0===t||!this.left)return;let e=JSON.stringify(t);this.updateCache.setLeftFrame!==e&&(this.left.setData({frame:t},!0),this.updateCache.setLeftFrame=e)}setLayerData(){if(!this.blueprint)return;let t=JSON.stringify(this.props.layerData),e=this.updateCache.layerData!==t;this.updateCache.layerData=t,e&&this.blueprint.setLayerData(this.props.layerData)}setBlueprintDataAndExtensions(t,e){if(!this.ref.current)return Promise.reject();let a=JSON.stringify(t),i=JSON.stringify(e);return a===this._blueprintData&&i===this._extensions&&this.setPromise||(this._blueprintData=a,this._extensions=i,this.updateCache={},this.renderedOnce=!1,this.right=void 0,this.setPromise=new Promise((i,o)=>{this.blueprint&&this.blueprint.destroy(),delete this.blueprint,Promise.all([r.e(9980),r.e(6270)]).then(r.bind(r,96270)).then(r=>{if(!this.ref.current)return o("Not mounted");if(a!==this._blueprintData)return o("Blueprint data changed");let s={videoControls:!0,...this.props.config};void 0===s.fallbackFont&&(s.fallbackFonts=[]),s.fallbackFonts.push("Noto Emoji"),s.useFontFallback&&s.fallbackFonts.push("TextSecuritySquare"),s.fallbackFont=s.fallbackFonts.join(", ");let n=r.Blueprint;this.blueprint=new n(t,{holder:this.ref.current,...s,debug:h.Z,width:this.props.style.width,height:this.props.style.height}),this.blueprint.on("click",this.eventListener),this.blueprint.on("mousedown",this.eventListener),this.blueprint.on("mouseup",this.eventListener),this.blueprint.on("dblclick",this.eventListener),this.blueprint.on("contextmenu",this.eventListener),this.blueprint.on("longtouch",this.eventListener),this.blueprint.on("load",this.eventListener),this.blueprint.setExtensions(e),this.right=this.blueprint.getLayerByName("right"),this.left=this.blueprint.getLayerByName("left"),i()})}).catch(()=>{this.setPromise=void 0})),this.setPromise}render(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s(),{id:p.__hash,children:p}),(0,i.jsx)("div",{style:this.props.style,ref:this.ref,className:"jsx-".concat(p.__hash)})]})}constructor(t){super(t),(0,a.Z)(this,"eventListener",t=>{let e={eventType:t.eventType,event:t.event,layer:void 0!==t.layer?t.layer.meta.name:void 0,_UNSAFE_layer:t.layer};this.props.eventListener(e)}),this.ref=(0,n.createRef)(),this._mounted=!1,this.updateCache={},this.disposers=[],this.assetDisposers={},this.assetChangeCallbacks={}}}(0,a.Z)(u,"defaultProps",{eventListener:()=>{},onMount:()=>{},config:{}});var f=u},4498:function(t,e,r){r.d(e,{AB:function(){return i},Co:function(){return s},X8:function(){return a},qT:function(){return n},xN:function(){return o}});let a=new String('.spread.jsx-c3af08ea235aad95{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.spread.jsx-c3af08ea235aad95 .border-top.jsx-c3af08ea235aad95{border-bottom:1px solid rgba(255,255,255,.1);position:relative;z-index:10;height:1px;width:100%;margin-bottom:-1px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.spread.jsx-c3af08ea235aad95 .border-bottom.jsx-c3af08ea235aad95{border-bottom:1px solid rgba(0,0,0,.8);position:relative;z-index:10;height:1px;width:100%;margin-top:-1px;margin-bottom:-1px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.spread.edit-mode.jsx-c3af08ea235aad95{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.spread.edit-mode.jsx-c3af08ea235aad95 [asset][editable]{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.spread.edit-mode.jsx-c3af08ea235aad95 [asset][editable]:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.spread.edit-mode.jsx-c3af08ea235aad95 text{pointer-events:none}.spread.edit-mode.jsx-c3af08ea235aad95:before{content:" ";display:block;position:absolute;left:0px;right:0px;top:0px;bottom:0px;border:1px solid rgba(var(--border1),1);z-index:10;pointer-events:none}.spread.edit-mode[page-number].jsx-c3af08ea235aad95:not([page-number=""]):after{content:attr(page-number);color:white;background-color:rgba(255,255,255,.2);display:inline-block;position:absolute;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);margin-top:10px;padding-left:10px;padding-right:10px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;height:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:11px;font-family:verdana;pointer-events:none}.spread.edit-mode.selected[page-number].jsx-c3af08ea235aad95:not([page-number=""]):after{background-color:rgba(var(--albumSelection),1);color:black}.spread.edit-mode.selected.jsx-c3af08ea235aad95:before{content:"";position:absolute;left:0px;right:0px;bottom:0px;top:0px;z-index:10;pointer-events:none;border:3px solid rgba(var(--albumSelection),1)}.spread.jsx-c3af08ea235aad95 a{cursor:pointer}.spread.jsx-c3af08ea235aad95:not(.edit-mode):not([view-mode="cover"]) [asset]:not([is-processing]){cursor:-webkit-zoom-in;cursor:-moz-zoom-in;cursor:zoom-in}.spread.jsx-c3af08ea235aad95:not(.edit-mode) [asset=svg]{cursor:default!important;pointer-events:none}.spread.jsx-c3af08ea235aad95:not(.edit-mode) [asset=text]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:default!important}.spread.jsx-c3af08ea235aad95:not(.edit-mode) text{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.cover-arrow.jsx-c3af08ea235aad95{background-color:white;width:50px;height:35px;-webkit-border-top-left-radius:50px;-moz-border-radius-topleft:50px;border-top-left-radius:50px;-webkit-border-top-right-radius:50px;-moz-border-radius-topright:50px;border-top-right-radius:50px;border-bottom:0px;position:absolute;z-index:10;bottom:0px;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);-webkit-box-shadow:0px 0px 3px 0px rgba(0,0,0,.2);-moz-box-shadow:0px 0px 3px 0px rgba(0,0,0,.2);box-shadow:0px 0px 3px 0px rgba(0,0,0,.2);cursor:pointer;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-o-animation-fill-mode:both;animation-fill-mode:both;-webkit-transition:all.2s cubic-bezier(.28,.84,.42,1);-moz-transition:all.2s cubic-bezier(.28,.84,.42,1);-o-transition:all.2s cubic-bezier(.28,.84,.42,1);transition:all.2s cubic-bezier(.28,.84,.42,1)}.cover-arrow.jsx-c3af08ea235aad95:hover{height:45px;width:60px}.cover-arrow.jsx-c3af08ea235aad95 .icon.jsx-c3af08ea235aad95 *.jsx-c3af08ea235aad95{stroke:#000;stroke-linejoin:round;stroke-linecap:round;stroke-miterlimit:10;fill-rule:evenodd;clip-rule:evenodd;fill:none}.cover-arrow.jsx-c3af08ea235aad95 .icon.jsx-c3af08ea235aad95 #path_1.jsx-c3af08ea235aad95{stroke-width:1.25px;stroke-dashoffset:0;stroke-dasharray:213;opacity:0}.cover-arrow.jsx-c3af08ea235aad95 .icon.jsx-c3af08ea235aad95 #path_2.jsx-c3af08ea235aad95{stroke-width:1.25px;stroke-dasharray:17;stroke-dashoffset:0}');a.__hash="c3af08ea235aad95";let i=new String(".page-row.jsx-604f4a3b93febc1a{position:relative;z-index:1;overflow:hidden;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.page-row.jsx-604f4a3b93febc1a svg.jsx-604f4a3b93febc1a{overflow:hidden;position:absolute}");i.__hash="604f4a3b93febc1a";let o=new String(".spread-message-wrapper.jsx-3af9f6e2eb5ea582{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.spread-message-wrapper.jsx-3af9f6e2eb5ea582 .spread-message.jsx-3af9f6e2eb5ea582{background-color:white;padding:10px 20px;border-left:5px solid transparent;margin:20px}.spread-message-wrapper.jsx-3af9f6e2eb5ea582 .spread-message.jsx-3af9f6e2eb5ea582>.spread-message-type.jsx-3af9f6e2eb5ea582{text-transform:uppercase;font-weight:bold}.spread-message-wrapper.jsx-3af9f6e2eb5ea582 .spread-message.spread-message.warning.jsx-3af9f6e2eb5ea582{border-color:yellow}.spread-message-wrapper.jsx-3af9f6e2eb5ea582 .spread-message.spread-message-error.jsx-3af9f6e2eb5ea582{border-color:red}");o.__hash="3af9f6e2eb5ea582";let s=new String('.page-attachment.jsx-2b4f236ad5102e3f{position:relative;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:10;margin-bottom:-1px}.page-attachment.arrow-bottom.jsx-2b4f236ad5102e3f:after{content:"";display:block;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid white;border-top-color:inherit;position:absolute;bottom:-5.5px;left:50%;margin-left:-6px}.page-attachment.arrow-bottom.jsx-2b4f236ad5102e3f:before{content:"";display:block;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid rgba(0,0,0,0);position:absolute;bottom:-6px;left:50%;margin-left:-6px}.page-attachment.arrow-top.jsx-2b4f236ad5102e3f:after{content:"";display:block;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid white;border-bottom-color:inherit!important;position:absolute;top:-5.5px;left:50%;margin-left:-6px}.page-attachment.arrow-top.jsx-2b4f236ad5102e3f:before{content:"";display:block;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid rgba(0,0,0,0);position:absolute;top:-6px;left:50%;margin-left:-6px}.page-attachment.prepend.first.jsx-2b4f236ad5102e3f:not(.last)>*,.page-attachment.append.first.jsx-2b4f236ad5102e3f:not(.last)>*{-webkit-border-bottom-left-radius:0px!important;-moz-border-radius-bottomleft:0px!important;border-bottom-left-radius:0px!important;-webkit-border-bottom-right-radius:0px!important;-moz-border-radius-bottomright:0px!important;border-bottom-right-radius:0px!important}.page-attachment.prepend.last.jsx-2b4f236ad5102e3f:not(.first)>*,.page-attachment.append.last.jsx-2b4f236ad5102e3f:not(.first)>*{-webkit-border-top-left-radius:0px!important;-moz-border-radius-topleft:0px!important;border-top-left-radius:0px!important;-webkit-border-top-right-radius:0px!important;-moz-border-radius-topright:0px!important;border-top-right-radius:0px!important}.page-attachment.prepend.jsx-2b4f236ad5102e3f:not(.first):not(.last)>*,.page-attachment.append.jsx-2b4f236ad5102e3f:not(.first):not(.last)>*{-webkit-border-radius:0px!important;-moz-border-radius:0px!important;border-radius:0px!important}');s.__hash="2b4f236ad5102e3f";let n=new String("html{-webkit-print-color-adjust:exact}body{padding:0;margin:0;background-color:white}.pages>div{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;page-break-before:always;break-before:all;break-after:all;-webkit-column-break-inside:avoid;page-break-inside:avoid;break-inside:avoid}.pages>div>svg{width:100%;height:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}svg:not(root){overflow:visible}");n.__hash="61787880bf1905c7"},70137:function(t,e,r){r.d(e,{Z:function(){return f}});var a=r(14924),i=r(68949),o=r(42261),s=r(72517),n=r(38026);class l{get x(){let t=(0,s.WJ)(this.data,["style","rotation"]),e=(0,s.GM)(this.data.frame,t).x1;return this.parent&&(e+=this.parent.x),e}get y(){let t=(0,s.WJ)(this.data,["style","rotation"]),e=(0,s.GM)(this.data.frame,t).y1;return this.parent&&(e+=this.parent.y),e}get width(){return this.data.frame.width}get height(){return this.data.frame.height}get asset(){return(0,s.WJ)(this.data,["style","content","asset"])}get outsideBorder(){let t=(0,s.WJ)(this.data,["style","border","thickness"]),e=(0,s.WJ)(this.data,["style","border","position"]);return"center"===e?t/2:0}walk(t){for(let e of this.layers)t(e),e.walk(t)}constructor(t,e){(0,a.Z)(this,"data",{}),(0,a.Z)(this,"layers",[]),this.parent=e,this.data=t,e&&e.layers.push(this)}}function d(t,e,r){let a=[];for(let i of t){if(void 0!==i[e]&&i[e]===r){if("id"===e)return i;a.push(i)}if(i.layers&&i.layers.length>0){let t=d(i.layers,e,r);if("id"===e)return t;a=a.concat(t)}}return a}function h(t,e,r){let a=[];for(let i of t)if(i.meta&&void 0!==i.meta[e]&&i.meta[e]===r&&a.push(i),i.layers&&i.layers.length>0){let t=h(i.layers,e,r);a=a.concat(t)}return a}function p(t,e,r,a){for(let i=0;i<t.length;i++){let o=t[i];o.meta&&void 0!==o.meta[e]&&o.meta[e]===r&&a(o,t,i),o.layers&&o.layers.length>0&&p(o.layers,e,r,a)}}function b(t,e){for(let r in e){let a=e[r];p(t,"name",r,t=>{(0,i.runInAction)(()=>{let e=(0,o.Z)(!0,t,a);for(let r in e)t[r]=e[r]})})}}function u(t){(0,i.runInAction)(()=>{for(let e in t)null===t[e]?delete t[e]:"[object Object]"===Object.prototype.toString.call(t[e])&&u(t[e])})}l.createTree=function(t,e){delete(t={...(0,i.toJS)(t)}).layers;let r=new l(t);return!function t(e,r){for(let a of e){let e={...a};delete e.layers;let i=new l(e,r);void 0!==a.layers&&a.layers.length>0&&t(a.layers,i)}}(e,r),r};var f=class{setData(t){if("function"==typeof t){this._data=t;return}void 0!==t&&(0,i.transaction)(()=>{let e=(0,i.keys)(this.data);for(let t of e)(0,i.remove)(this.data,t);(0,i.extendObservable)(this.data,t)})}get autoPushToServer(){return this._autoPushToServer>0}set autoPushToServer(t){t?this._autoPushToServer++:this._autoPushToServer--,this._autoPushToServer>1&&(this._autoPushToServer=1)}watchForChanges(){this.disposers.push((0,i.reaction)(()=>[(0,i.toJS)(this.data.layerData),(0,i.toJS)(this.data.blueprintExtensions)],()=>{this.autoPushToServer&&this.wantsServerPush++}))}setZoomTextLayers(t){this.zoomTextLayers=t}setConfig(t){this.width=t.width,this.height=t.height,this.crop=t.crop,this.type=void 0!==t.type?t.type:"blueprint",this.moveRight=t.moveRight,this.padding=void 0!==t.padding?t.padding:0,this.background=void 0!==t.background?t.background:void 0}setBlueprint(t){if(t.url===this.blueprint.url)return Promise.resolve();new Promise(e=>{if(void 0===t.data&&t.url){let[r]=(0,n.FetchJSON)(t.url);r.then(t=>{let{data:r}=t;e(r)})}else e(t.data)}).then(e=>{(0,i.runInAction)(()=>{t.data=e,this.blueprint=t})})}ready(){let t=[this.getData(),new Promise(t=>{void 0===this.blueprint.data?(0,i.reaction)(()=>this.blueprint.data,(e,r,a)=>{a.dispose(),this.getData().then(()=>{t()})}):t()})];return Promise.all(t)}setLayerProperty(t){let e="Artboard"===t.layer||void 0!==this.getLayerByMetaName(t.layer).get();e&&(0,i.transaction)(()=>{t.temp&&void 0===this.data.tempLayerData&&(0,i.extendObservable)(this.data,{tempLayerData:{}}),t.temp||this.setLayerProperty({...t,value:null,temp:!0}),(0,s.Hd)(t.temp?this.data.tempLayerData:this.data.layerData,[t.layer,...t.path],t.value),u(t.temp?this.data.tempLayerData:this.data.layerData)})}get artboard(){if(!this.blueprint.data)return;let t={...(0,i.toJS)(this.blueprint.data.artboard)};return(0,s.Hd)(t,["meta","name"],"Artboard"),b([t],(0,i.toJS)(this.layerData)),t}get artboardFill(){if(!this.blueprint.data)return;let t=(0,s.WJ)(this.artboard,["style","fill","color","rgba"]);return t||[255,255,255,1]}get layers(){if(!this.blueprint.data)return[];let t=(0,i.toJS)(this.blueprint.data.artboard.layers);return void 0!==this.extensions.Artboard&&(0,i.runInAction)(()=>{for(let e of(0,i.toJS)(this.extensions).Artboard.layers)t.push(e)}),b(t,(0,i.toJS)(this.extensions)),b(t,(0,i.toJS)(this.layerData)),t}walkLayers(t){return function t(e,r){for(let a of e)r(a),a.layers&&a.layers.length>0&&t(a.layers,r)}(this.layers,t)}getLayerByName(t){return(0,i.computed)(()=>{let e=d(this.layers,"name",t);if(e.length>0)return e[0]},{name:"getLayerByName",keepAlive:!0})}getLayerByMetaName(t){return(0,i.computed)(()=>{let e=h(this.layers,"name",t);if(e.length>0)return e[0]},{name:"getLayerByMetaName",keepAlive:!0})}getLayersByMetaKey(t,e){return(0,i.computed)(()=>h(this.layers,t,e),{name:"getLayersByMetaKey",keepAlive:!0})}getLayerById(t){return(0,i.computed)(()=>d(this.layers,"id",t),{name:"getLayerById",keepAlive:!0})}getData(){return new Promise(t=>{"function"==typeof this._data?this._data().then(e=>{delete this._data,this.autoPushToServer=!1,this.setData(e),this.autoPushToServer=!0,t(this.data)}):t(this.data)})}get extensions(){return this.data.blueprintExtensions&&void 0!==this.data.blueprintExtensions[this.blueprint.key]?this.data.blueprintExtensions[this.blueprint.key]:{}}get layerData(){return this.data.layerData}get tempLayerData(){return this.data.tempLayerData?this.data.tempLayerData:{}}addExtensions(t,e){void 0===this.data.blueprintExtensions&&(0,i.extendObservable)(this.data,{blueprintExtensions:{}});let r=this.extensions[t]&&this.extensions[t].layers?this.extensions[t].layers:[],a=r.concat(e);(0,s.Hd)(this.data.blueprintExtensions,[this.blueprint.key,t,"layers"],a)}removeExtension(t){if(void 0===this.data.blueprintExtensions)return;let e=this.data.blueprintExtensions[this.blueprint.key];for(let r in e)p(e[r].layers,"name",t,(t,e)=>{(0,i.runInAction)(()=>{e.remove(t)})});(0,i.runInAction)(()=>{(0,i.remove)(this.data.layerData,t),this.data.tempLayerData&&(0,i.remove)(this.data.tempLayerData,t)})}setExtensionProperty(t){if(void 0===this.data.blueprintExtensions)return;let e=this.data.blueprintExtensions[this.blueprint.key];for(let r in e)p(e[r].layers,"name",t.layer,e=>{(0,i.runInAction)(()=>{(0,s.Hd)(e,[...t.path],t.value),u(e)})})}removeLayer(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];(0,i.transaction)(()=>{e||(this.autoPushToServer=!1),this.removeExtension(t),this.setLayerProperty({layer:t,path:["style","display"],value:"none"}),this.setLayerProperty({layer:t,path:["style","content"],value:{type:"flat-color",color:{rgba:[0,0,0,0]}}}),e||(this.autoPushToServer=!0)})}cutout(t){if(!t||0===t.length)return;let e={left:void 0,right:void 0,top:void 0,bottom:void 0,width:void 0,height:void 0},r=l.createTree(this.artboard,this.layers);if(r.walk(r=>{let a=r.asset;if(a&&t.includes(a.type)){let t=r.outsideBorder,a=r.x-t,i=r.y-t,o=a+r.width+t,s=i+r.height+t;(void 0===e.left||e.left>a)&&(e.left=a),(void 0===e.right||e.right<o)&&(e.right=o),(void 0===e.top||e.top>i)&&(e.top=i),(void 0===e.bottom||e.bottom<s)&&(e.bottom=s)}}),void 0!==e.left){r.walk(t=>{let r=t.asset,a=r&&"svg"===r.type;if(a){let r=t.outsideBorder,a=t.y-r,i=t.y+t.height+r,o=t.x-r,s=t.x+t.width+r,n=(s>e.left&&s<e.right||s>e.right&&o<e.right)&&(i>e.top&&i<e.bottom||i>e.bottom&&a<e.bottom);if(n){let a=t.y-r,i=t.y+t.height+r,o=t.x-r,s=t.x+t.width+r;e.left>o&&(e.left=o),e.right<s&&(e.right=s),e.top>a&&(e.top=a),e.bottom<i&&(e.bottom=i)}}else if(!r){let r=t.outsideBorder,a=t.y-r,i=t.y+t.height+r,o=t.x-r,s=t.x+t.width+r,n=(s>e.left&&s<e.right||s>e.right&&o<e.right)&&(i>e.top&&i<e.bottom||i>e.bottom&&a<e.bottom);if(n){let t=e.left-o;t<20&&t>0&&(e.left=o);let r=s-e.right;r<20&&r>0&&(e.right=s);let n=e.top-a;n<20&&n>0&&(e.top=a);let l=i-e.bottom;l<20&&l>0&&(e.bottom=i)}}});let t=(0,i.toJS)(this.blueprint.artBox);e.top=Math.max(t.y,e.top),e.bottom=Math.min(t.height+t.y,e.bottom),e.left=Math.max(t.x,e.left),e.right=Math.min(t.width+t.x,e.right),e.width=e.right-e.left,e.height=e.bottom-e.top;let a={x:e.left,y:e.top,width:e.width,height:e.height};return a}}dispose(){for(let t of this.disposers)t()}constructor(t){(0,a.Z)(this,"data",{}),(0,a.Z)(this,"blueprint",{}),(0,a.Z)(this,"_autoPushToServer",1),(0,a.Z)(this,"wantsServerPush",0),(0,a.Z)(this,"zoomTextLayers",[]),(0,a.Z)(this,"disposers",[]),(0,i.makeObservable)(this,{data:i.observable,blueprint:i.observable,setLayerProperty:i.action,wantsServerPush:i.observable,addExtensions:i.action,removeExtension:i.action,setExtensionProperty:i.action,setData:i.action,artboard:(0,i.computed)({keepAlive:!0}),layers:(0,i.computed)({keepAlive:!0}),extensions:(0,i.computed)({keepAlive:!0}),layerData:(0,i.computed)({keepAlive:!0}),tempLayerData:(0,i.computed)({keepAlive:!0})}),this.design=t.design,this.index=t.index,this.setData(t.data),this.watchForChanges()}}},42261:function(t,e){/*! extend.js | (c) 2017 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/extend */let r=function(){var t={},e=!1,a=0,i=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],a++);a<i;a++){var o=arguments[a];!function(a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e&&"[object Object]"===Object.prototype.toString.call(a[i])?t[i]=r(!0,t[i],a[i]):t[i]=a[i])}(o)}return t};e.Z=r}}]);
//# sourceMappingURL=503-41ff860a0d3a7fe9.js.map